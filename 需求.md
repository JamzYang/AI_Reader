
开发一个 Java 程序，利用 Gemini LLM 阅读并分析一个百万字级别的长篇小说。 程序具体流程如下：

1.  **章节识别与校验：**
    *   使用正则表达式 `第[一二三四五六七八九十百千0-9]+章\s+.*`，从小说文件中识别所有章节标题。
    *   验证章节顺序是否递增。
    *   检查是否存在重复或缺失的章节, 如有先记录在内存中。
    *   最后一章识别完成后，**如果发现重复或缺失的章节，打印日志并立即中断程序。**

2.  **小说分割：** (只有在章节校验通过后才执行)
    *   将小说按照章节进行分割。
    *   每 10 个章节合并成一个新的 TXT 文件。
    *   **文件名按照顺序命名，格式为： "001第1-10章.txt"， "002第11-20章.txt" 依次递增。**

3.  **Gemini API 调用与分析：**
    *   针对每个分割后的文件（包含 10 个章节），调用 Gemini API，并使用您提供的 prompt 进行分析。
    *   每个 API 调用的结果保存在一个 JSON 文件中。
    *   **使用 10 个线程并发调用 Gemini API。**
    *   **API 调用需要严格遵守限流规则，每分钟最多调用 15 次。**

4.  **结果校验与重试：**
    *   **检查每次 API 调用返回的结果中包含的章节数量是否与对应的切片文件中的章节数量一致。**
    *   **如果不一致，则进行重试，最多重试 3 次。**
    *   **如果超过重试次数，仍然不一致，则记录错误日志，并继续处理下一个文件。** (或者可以选择直接中断程序，根据您的偏好)

5.  **结果保存：**
    *   将每次 API 调用的输出结果保存下来。
    *   最终将所有分割文件的分析结果，按照章节顺序合并到一个文件中。


prompt:
```
请你阅读并逐步分析《牧神记》的每一章节。在分析中，请重点关注以下几个方面，并尽可能提供详细的描写和具体的情节：

男主角的经历：

男主角在本章节中的冒险旅程、日常生活，以及遇到的具体事件。

描述男主角在这些章节中的成长，体现在性格、技能、心境等方面的变化。

男主角在这些章节中是否有重要的转折点或关键事件？如果有，请详细描述事件的内容和影响。

世界观与设定：

在本章节中，小说世界观有什么体现？

详细解释本章节涉及的地理环境、设定、特殊规则和力量原理

人物关系：

列出并详细描述与男主角相关的关键人物在本章节中的表现，他们之间的互动、对话，以及对主角的影响。
他们的背景、性格，以及与主角的关系。

虚构历史：

如果本章节提到重要的历史事件、传说、神话，请详细说明。
这些历史事件和传说对当前世界和男主角产生了什么影响？
其他重要细节：

除了上述四点，请关注章节中任何重要的细节，包括伏笔、线索、暗示等。

总结每章的关键内容，并分析章节之间的关联性。

请注意：

避免过于简略，重点突出情节的细节，尽可能用具体的例子和描述来支撑你的分析。

对于战斗场景，可以简要概括，但重点要放在战斗的结果、对剧情的影响，以及战斗中体现的人物关系和设定。

对伏笔、线索等进行提示，并分析其可能的影响。
```